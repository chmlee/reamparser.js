!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("rea",[],e):"object"==typeof exports?exports.rea=e():t.rea=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports={mutateString:function(t){return{type:"string",subtype:"",content:t.trim()}}}},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(2),u=n(3),l=u.mutateString,f=u.mutateNumber,s=u.mutateBoolean,c=n(6).toCSV,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileText=e,this.fileArray=[""].concat(this.fileText.split(/\r?\n/)),this.level=0,this.lineIndex=1,this.fileMaxIndex=this.fileArray.length-1}var e,n,i;return e=t,(n=[{key:"lineRaw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineIndex;return this.fileArray[t]}},{key:"lineToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineIndex;if(""===this.lineRaw(t)||t>this.fileMaxIndex)return"x";var e=this.lineRaw(t).match(/[^\s]+/),n=r(e,1),i=n[0];return i}},{key:"nextLine",value:function(){for(this.lineIndex+=1;!(/\S/.test(this.lineRaw())||(this.lineIndex+=1,this.lineIndex>this.fileMaxIndex)););}},{key:"undoNextLine",value:function(){for(this.lineIndex-=1;!(/\S/.test(this.lineRaw())||(this.lineIndex-=1,this.lineIndex>this.fileMaxIndex)););}},{key:"parseEntry",value:function(){if(this.lineToken()==="#".repeat(this.level+1)){if(!/\w/.test(this.lineRaw()))throw Error("Entry must have name!");var t=this.lineRaw().match(/ *#+ *([\w+ ]+[^ ])/)[1];this.nextLine();for(var e=[];"-"===this.lineToken();){var n=this.parseVariable(this.lineRaw());e.push(n),this.nextLine()}var r=[];for(this.level+=1;this.lineToken()==="#".repeat(this.level+1);){var i=this.parseEntry();r.push(i)}return this.level-=1,{type:"entry",name:t,variables:e,subEntries:r}}return null}},{key:"parseVariable",value:function(t){var e=r(t.match(a.VARIABLE),3),n=e[1],i=e[2];return{type:"variable",key:n,value:this.parseValue(i.trim())}}},{key:"parseValue",value:function(t){var e,n,r,i=null!==(e=null!==(n=null!==(r=this.parseList(t))&&void 0!==r?r:s(t))&&void 0!==n?n:f(t))&&void 0!==e?e:l(t),o=this.parseComment();return i.comment=o,i}},{key:"parseList",value:function(t){if(""===t){for(var e=this.lineIndex+1;""===this.lineRaw(e).trim();)e+=1;if("*"!==this.lineToken(e))throw Error("Variable must have value!");this.lineIndex=e;for(var n=[];"*"===this.lineToken();){var r=this.parseValue(this.lineRaw().match(/ *\* *([\S+ ]+[^ ])/)[1]);n.push(r),this.nextLine()}return this.undoNextLine(),{type:"list",subtype:"",content:n}}return null}},{key:"parseComment",value:function(){for(var t=this.lineIndex+1;t<this.fileMaxIndex&&""===this.lineRaw(t).trim();)t+=1;return">"!==this.lineToken(t)?"":(this.lineIndex=t,this.lineRaw().match(/ *> *([\S+ ]+[^ ])/)[1])}},{key:"setDefault",value:function(){this.level=0,this.lineIndex=1}},{key:"toTree",value:function(){var t=this.parseEntry();return this.setDefault(),t}},{key:"toCSV",value:function(){var t=this.toTree();return c(t)}}])&&o(e.prototype,n),i&&o(e,i),t}();e.MdFile=h},function(t,e){t.exports=Object.freeze({VARIABLE:/- +(\b[ *\w]+\b) *:(.*)$/})},function(t,e,n){var r=n(0).mutateString,i=n(4).mutateNumber,o=n(5).mutateBoolean;t.exports={mutateString:r,mutateNumber:i,mutateBoolean:o}},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports={mutateNumber:function(t){return"$"===t[0]&&"$"===t[t.length-1]?{type:"number",subtype:"",content:n(t.match(/\$(.*)\$/),2)[1]}:null}}},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(0).mutateString;t.exports={mutateBoolean:function(t){if("`"===t[0]&&"`"===t[t.length-1]){var e,n=r(t.match(/`(.*)`/),2)[1];if("TRUE"===n)e="true";else{if("FALSE"!==n)return o(t);e="false"}return{type:"bolean",subtype:e,content:e}}return null}}},function(t,e,n){var r=n(7).toCSV;t.exports={toCSV:r}},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){for(var e=t.variables.filter((function(t){return"list"!==t.value.type})).map((function(t){return t.value.content})),r=[],o=0;o<t.subEntries.length;o+=1){i(t.subEntries[o]).forEach((function(t){return r.push(t)}))}return function(t,e){var r=[];return 0===e.length?[t]:(e.forEach((function(e){var i=t.concat.apply(t,n(e));r.push(i)})),r)}(e,r)}t.exports={toCSV:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=i(t),r=n.map((function(t){return t.join(e)})),o=r.join("\r\n");return o}}}])}));